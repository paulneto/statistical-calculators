<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Normal Distribution Dashboard</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
  <style>
    :root {
      --primary: #6366f1;
      --primary-light: #818cf8;
      --primary-dark: #4f46e5;
      --success: #10b981;
      --success-light: #34d399;
      --danger: #ef4444;
      --warning: #f59e0b;
      --text-dark: #1f2937;
      --text-light: #f9fafb;
      --bg-light: #f9fafb;
      --bg-dark: #111827;
      --bg-card: #ffffff;
      --border-color: #e5e7eb;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f3f4f6;
      color: var(--text-dark);
      line-height: 1.6;
    }

    .dashboard {
      display: grid;
      grid-template-columns: 300px 1fr;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      background-color: var(--bg-dark);
      color: var(--text-light);
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
    }

    .logo {
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo-icon {
      width: 36px;
      height: 36px;
      background-color: var(--primary);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 20px;
    }

    .logo-text {
      font-size: 1.25rem;
      font-weight: 600;
    }

    .controls {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .control-group h3 {
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #9ca3af;
      margin-bottom: 0.25rem;
    }

    .slider-container {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .slider-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .slider-label {
      font-size: 0.9rem;
      font-weight: 500;
    }

    .value-display {
      font-size: 0.85rem;
      font-weight: 600;
      background: rgba(255, 255, 255, 0.1);
      padding: 0.15rem 0.5rem;
      border-radius: 4px;
      min-width: 40px;
      text-align: center;
    }

    input[type="range"] {
      width: 100%;
      height: 6px;
      -webkit-appearance: none;
      appearance: none;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--primary-light);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      background: var(--primary);
      transform: scale(1.1);
    }

    button {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    button:hover {
      background-color: var(--primary-dark);
      transform: translateY(-1px);
    }

    .button-icon {
      display: inline-block;
      width: 20px;
      height: 20px;
    }

    /* Main content */
    .main-content {
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    .header {
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-color);
    }

    .header h1 {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 0.5rem;
    }

    .header p {
      color: #6b7280;
      max-width: 700px;
    }

    .data-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
    }

    .card {
      background-color: var(--bg-card);
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      padding: 1.25rem;
      transition: all 0.2s ease;
    }

    .card:hover {
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .card-title {
      font-size: 0.875rem;
      font-weight: 600;
      color: #6b7280;
    }

    .card-icon {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: rgba(99, 102, 241, 0.1);
      color: var(--primary);
      border-radius: 6px;
    }

    .card-value {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    .card-description {
      font-size: 0.875rem;
      color: #6b7280;
    }

    .chart-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .chart-card {
      background-color: var(--bg-card);
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      padding: 1.25rem;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.25rem;
    }

    .chart-title {
      font-size: 1rem;
      font-weight: 600;
    }

    .chart-container {
      height: 300px;
    }

    .legend {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
    }

    .legend-color {
      width: 16px;
      height: 3px;
    }

    /* Progress bar */
    .progress-container {
      width: 100%;
      height: 8px;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      margin-top: 0.5rem;
    }

    .progress-bar {
      height: 100%;
      background-color: var(--primary-light);
      width: 0;
      transition: width 0.3s ease;
    }

    /* Line */
    .line {
      fill: none;
      stroke-width: 2.5px;
    }

    .theoretical {
      stroke: var(--primary);
    }

    .histogram {
      stroke: var(--success);
    }

    .bar {
      fill: var(--success-light);
      opacity: 0.7;
    }

    .axis {
      font-size: 12px;
    }

    .footer {
      text-align: center;
      padding: 1rem 0;
      color: #6b7280;
      font-size: 0.875rem;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .dashboard {
        grid-template-columns: 1fr;
      }

      .sidebar {
        display: none;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div style="background: linear-gradient(to right, #8b5cf6, #7c3aed); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
    <div style="max-width: 100%; margin: 0 auto; padding: 24px 20px;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
        <h1 style="font-size: 24px; font-weight: bold; color: white; margin: 0; padding: 0; border: none; text-align: left;">Normal Distribution Dashboard</h1>
        <a href="../index.html" style="background-color: #ffffff; color: #8b5cf6; padding: 8px 16px; border-radius: 8px; font-weight: 600; text-decoration: none; font-size: 14px; display: inline-block; transition: background-color 0.2s;">
          ← Back to Calculators
        </a>
      </div>
      <p style="color: white; font-size: 14px; font-weight: 500; margin: 0;">Interactive simulation and visualization tool</p>
    </div>
  </div>

  <div class="dashboard">
    <!-- Sidebar with controls -->
    <div class="sidebar">
      <div class="logo">
        <div class="logo-icon">σ</div>
        <div class="logo-text">Normal Distribution</div>
      </div>

      <div class="controls">
        <div class="control-group">
          <h3>Distribution Parameters</h3>
          
          <div class="slider-container">
            <div class="slider-header">
              <span class="slider-label">Mean (μ)</span>
              <span id="mean-value" class="value-display">0.0</span>
            </div>
            <input type="range" id="mean" min="-3" max="3" step="0.1" value="0">
          </div>
          
          <div class="slider-container">
            <div class="slider-header">
              <span class="slider-label">Standard Deviation (σ)</span>
              <span id="stddev-value" class="value-display">1.0</span>
            </div>
            <input type="range" id="stddev" min="0.1" max="3" step="0.1" value="1">
          </div>
        </div>
        
        <div class="control-group">
          <h3>Real-World Mapping</h3>
          
          <div class="slider-container">
            <div class="slider-header">
              <span class="slider-label">Real-World Mean</span>
              <span id="real-mean-value" class="value-display">100</span>
            </div>
            <input type="range" id="real-mean" min="0" max="500" step="5" value="100">
          </div>
          
          <div class="slider-container">
            <div class="slider-header">
              <span class="slider-label">Real-World StdDev</span>
              <span id="real-stddev-value" class="value-display">20</span>
            </div>
            <input type="range" id="real-stddev" min="1" max="100" step="1" value="20">
          </div>
        </div>
        
        <div class="control-group">
          <h3>Simulation Settings</h3>
          
          <div class="slider-container">
            <div class="slider-header">
              <span class="slider-label">Sample Size</span>
              <span id="sample-size-value" class="value-display">100</span>
            </div>
            <input type="range" id="sample-size" min="10" max="1000" step="10" value="100">
          </div>
          
          <div class="slider-container">
            <div class="slider-header">
              <span class="slider-label">Number of Bins</span>
              <span id="bin-count-value" class="value-display">20</span>
            </div>
            <input type="range" id="bin-count" min="5" max="50" step="1" value="20">
          </div>
          
          <div class="slider-container">
            <div class="slider-header">
              <span class="slider-label">Animation Speed</span>
              <span id="auto-update-value" class="value-display">Fast</span>
            </div>
            <input type="range" id="auto-update" min="0" max="1000" step="10" value="0">
          </div>
        </div>

        <div class="progress-info">
          <div class="slider-header">
            <span class="slider-label">Progress</span>
            <span><span id="data-counter">0</span> / <span id="data-total">100</span></span>
          </div>
          <div class="progress-container">
            <div id="progress-bar" class="progress-bar"></div>
          </div>
        </div>
        
        <button id="generate">
          <span class="button-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9"/>
            </svg>
          </span>
          Generate Random Data
        </button>
      </div>
    </div>

    <!-- Main content area -->
    <div class="main-content">
      <div class="header">
        <h1>Normal Distribution Simulation</h1>
        <p>Explore the properties of the normal distribution by adjusting parameters and generating random samples. Observe how the theoretical probability density function compares to actual random data.</p>
      </div>

      <!-- Data cards -->
      <div class="data-cards">
        <div class="card">
          <div class="card-header">
            <div class="card-title">Expected Mean</div>
            <div class="card-icon">μ</div>
          </div>
          <div id="expected-mean" class="card-value">0.0</div>
          <div class="card-description">Theoretical center of distribution</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-title">Expected StdDev</div>
            <div class="card-icon">σ</div>
          </div>
          <div id="expected-stddev" class="card-value">1.0</div>
          <div class="card-description">Theoretical spread of distribution</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-title">Actual Mean</div>
            <div class="card-icon">x̄</div>
          </div>
          <div id="actual-mean" class="card-value">-</div>
          <div class="card-description">Sample mean from random data</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-title">Actual StdDev</div>
            <div class="card-icon">s</div>
          </div>
          <div id="actual-stddev" class="card-value">-</div>
          <div class="card-description">Sample standard deviation</div>
        </div>
      </div>
      
      <!-- Real-world interpretation card -->
      <div class="chart-card" style="margin-bottom: 1.5rem;">
        <div class="chart-header">
          <div class="chart-title">Real-World Interpretation</div>
        </div>
        <div style="padding: 15px;">
          <p style="margin-bottom: 15px;">This section translates the abstract statistical distribution into meaningful real-world values based on your settings.</p>
          
          <div class="real-world-table">
            <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">
              <thead>
                <tr style="background-color: #f3f4f6; border-bottom: 2px solid #e5e7eb;">
                  <th style="padding: 10px; text-align: left; width: 30%;">Statistical Term</th>
                  <th style="padding: 10px; text-align: center;">Calculator Value</th>
                  <th style="padding: 10px; text-align: center;">Real-World Value</th>
                  <th style="padding: 10px; text-align: center;">Interpretation</th>
                </tr>
              </thead>
              <tbody>
                <tr style="border-bottom: 1px solid #e5e7eb;">
                  <td style="padding: 10px; font-weight: 600;">Mean (μ)</td>
                  <td style="padding: 10px; text-align: center;"><span id="table-calc-mean">0.0</span></td>
                  <td style="padding: 10px; text-align: center;"><span id="table-real-mean">100</span></td>
                  <td style="padding: 10px;">Average or central value</td>
                </tr>
                <tr style="border-bottom: 1px solid #e5e7eb;">
                  <td style="padding: 10px; font-weight: 600;">Mean - 1σ to Mean + 1σ</td>
                  <td style="padding: 10px; text-align: center;">
                    <span id="table-calc-1sd-low">-1.0</span> to <span id="table-calc-1sd-high">1.0</span>
                  </td>
                  <td style="padding: 10px; text-align: center;">
                    <span id="table-real-1sd-low">80</span> to <span id="table-real-1sd-high">120</span>
                  </td>
                  <td style="padding: 10px;">68% of all values fall in this range</td>
                </tr>
                <tr style="border-bottom: 1px solid #e5e7eb;">
                  <td style="padding: 10px; font-weight: 600;">Mean - 2σ to Mean + 2σ</td>
                  <td style="padding: 10px; text-align: center;">
                    <span id="table-calc-2sd-low">-2.0</span> to <span id="table-calc-2sd-high">2.0</span>
                  </td>
                  <td style="padding: 10px; text-align: center;">
                    <span id="table-real-2sd-low">60</span> to <span id="table-real-2sd-high">140</span>
                  </td>
                  <td style="padding: 10px;">95% of all values fall in this range</td>
                </tr>
                <tr>
                  <td style="padding: 10px; font-weight: 600;">Mean - 3σ to Mean + 3σ</td>
                  <td style="padding: 10px; text-align: center;">
                    <span id="table-calc-3sd-low">-3.0</span> to <span id="table-calc-3sd-high">3.0</span>
                  </td>
                  <td style="padding: 10px; text-align: center;">
                    <span id="table-real-3sd-low">40</span> to <span id="table-real-3sd-high">160</span>
                  </td>
                  <td style="padding: 10px;">99.7% of all values fall in this range</td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div style="background-color: #eef2ff; border-left: 4px solid var(--primary); padding: 15px; margin-bottom: 10px;">
            <h4 style="margin-bottom: 8px; color: var(--primary-dark);">How to Use This Table</h4>
            <p>This table shows how the statistical values in the calculator (with mean <span id="explanation-mean">0.0</span> and standard deviation <span id="explanation-stddev">1.0</span>) map to your real-world values (with mean <span id="explanation-real-mean">100</span> and standard deviation <span id="explanation-real-stddev">20</span>).</p>
          </div>
          
          <div style="background-color: #f0fdf4; border-left: 4px solid var(--success); padding: 15px;">
            <h4 style="margin-bottom: 8px; color: var(--success);">Application Example</h4>
            <p>If this were test scores, a student scoring at the mean would get <span id="example-mean">100</span> points. About 68% of students would score between <span id="example-1sd-low">80</span> and <span id="example-1sd-high">120</span> points.</p>
          </div>
        </div>
      </div>

      <!-- Charts -->
      <div class="chart-grid">
        <div class="chart-card">
          <div class="chart-header">
            <div class="chart-title">Probability Density Function</div>
          </div>
          <div id="pdf-chart" class="chart-container"></div>
          <div class="legend">
            <div class="legend-item">
              <div class="legend-color" style="background-color: var(--primary); height: 3px;"></div>
              <div class="legend-text">Theoretical Distribution</div>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: red; height: 2px; border-top: 1px dashed red;"></div>
              <div class="legend-text">Expected Mean</div>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: blue; height: 2px; border-top: 1px dashed blue;"></div>
              <div class="legend-text">Expected ±1 StdDev</div>
            </div>
          </div>
        </div>
        
        <div class="chart-card">
          <div class="chart-header">
            <div class="chart-title">Random Data Histogram</div>
          </div>
          <div id="histogram-chart" class="chart-container"></div>
          <div class="legend">
            <div class="legend-item">
              <div class="legend-color" style="background-color: var(--success-light); height: 10px;"></div>
              <div class="legend-text">Frequency</div>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: red; height: 2px; border-top: 1px dashed red;"></div>
              <div class="legend-text">Actual Mean</div>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: purple; height: 2px; border-top: 1px dashed purple;"></div>
              <div class="legend-text">Actual ±1 StdDev</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Educational sections -->
      <div class="chart-card">
        <div class="chart-header">
          <div class="chart-title">Understanding the Normal Distribution</div>
        </div>
        <div style="padding: 10px;">
          <h3 style="margin-bottom: 10px; color: var(--primary-dark);">Basic Properties</h3>
          <p style="margin-bottom: 16px;">The normal distribution (also known as the Gaussian distribution) is a symmetrical, bell-shaped distribution that is defined by two parameters:</p>
          <ul style="list-style-type: disc; padding-left: 20px; margin-bottom: 16px;">
            <li><strong>Mean (μ)</strong>: The central value or average of the distribution. It determines the location of the peak.</li>
            <li><strong>Standard Deviation (σ)</strong>: A measure of spread or dispersion. It determines how wide the bell shape is.</li>
          </ul>
          
          <p style="margin-bottom: 16px;">Key properties of the normal distribution:</p>
          <ul style="list-style-type: disc; padding-left: 20px; margin-bottom: 16px;">
            <li>About 68% of values fall within ±1 standard deviation from the mean</li>
            <li>About 95% of values fall within ±2 standard deviations from the mean</li>
            <li>About 99.7% of values fall within ±3 standard deviations from the mean</li>
            <li>The distribution is symmetrical around the mean</li>
            <li>The mean, median, and mode are all equal</li>
          </ul>
          
          <h3 style="margin: 20px 0 10px; color: var(--primary-dark);">Working with Specific Values</h3>
          <p style="margin-bottom: 16px;">If you're working with a specific domain (like IQ scores, customer satisfaction, etc.), you need to adjust the mean and standard deviation accordingly:</p>
          
          <div style="background-color: #f8f9fa; border-left: 4px solid var(--primary); padding: 15px; margin-bottom: 16px;">
            <strong>Example:</strong> If measuring student test scores with a mean of 125 points:
            <ul style="list-style-type: none; padding-left: 10px; margin-top: 10px;">
              <li>• Mean = 125 (center of the distribution)</li>
              <li>• If standard deviation = 15 points:</li>
              <li style="padding-left: 20px;">- 68% of students score between 110-140 points (μ ± 1σ)</li>
              <li style="padding-left: 20px;">- 95% of students score between 95-155 points (μ ± 2σ)</li>
              <li style="padding-left: 20px;">- 99.7% of students score between 80-170 points (μ ± 3σ)</li>
            </ul>
          </div>
          
          <h3 style="margin: 20px 0 10px; color: var(--primary-dark);">Understanding Input Parameters</h3>
          <ul style="list-style-type: disc; padding-left: 20px; margin-bottom: 16px;">
            <li><strong>Mean (μ)</strong>: Set this to the expected average of your data. Adjust to see how changes in the central tendency affect distribution.</li>
            <li><strong>Standard Deviation (σ)</strong>: Controls the spread of the distribution. Larger values create wider, flatter curves, while smaller values create taller, narrower curves.</li>
            <li><strong>Sample Size</strong>: The number of random data points to generate. Larger sample sizes provide more accurate representations of the theoretical distribution.</li>
            <li><strong>Number of Bins</strong>: Controls the granularity of the histogram. More bins show finer detail but may appear noisier with small sample sizes.</li>
            <li><strong>Animation Speed</strong>: Controls how quickly data points are added to the simulation, allowing you to observe how the distribution forms over time.</li>
          </ul>
          
          <h3 style="margin: 20px 0 10px; color: var(--primary-dark);">Marketing Research Applications</h3>
          <p style="margin-bottom: 16px;">The normal distribution is widely used in marketing research and analysis:</p>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
              <h4 style="color: var(--success); margin-bottom: 10px;">Customer Satisfaction Scores</h4>
              <p>Customer satisfaction often follows a normal distribution. If using a 1-10 scale:</p>
              <ul style="padding-left: 16px; margin-top: 5px;">
                <li>Mean: 7.5 (average satisfaction)</li>
                <li>StdDev: 1.2 (typical spread)</li>
                <li>Insights: Scores below 5.1 (μ - 2σ) indicate serious issues warranting immediate attention</li>
              </ul>
            </div>
            
            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
              <h4 style="color: var(--primary); margin-bottom: 10px;">Product Usage Frequency</h4>
              <p>Monthly product usage (times per month):</p>
              <ul style="padding-left: 16px; margin-top: 5px;">
                <li>Mean: 12 (average uses)</li>
                <li>StdDev: 3 (typical variation)</li>
                <li>Insights: Heavy users (>18 uses) represent top ~2.5% of customers; potential brand ambassadors</li>
              </ul>
            </div>
            
            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
              <h4 style="color: var(--warning); margin-bottom: 10px;">Purchase Amounts</h4>
              <p>Average purchase amounts in dollars:</p>
              <ul style="padding-left: 16px; margin-top: 5px;">
                <li>Mean: $85 (average purchase)</li>
                <li>StdDev: $22 (typical variation)</li>
                <li>Insights: Premium customers (>$129, μ + 2σ) could be targeted for loyalty programs</li>
              </ul>
            </div>
            
            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
              <h4 style="color: var(--danger); margin-bottom: 10px;">Response Times</h4>
              <p>Customer service response times (minutes):</p>
              <ul style="padding-left: 16px; margin-top: 5px;">
                <li>Mean: 15 (average response time)</li>
                <li>StdDev: 5 (typical variation)</li>
                <li>Insights: Responses over 25 minutes (μ + 2σ) indicate need for process improvement</li>
              </ul>
            </div>
          </div>
          
          <p style="font-style: italic; color: #6b7280;">Note: Use this simulator to experiment with these examples by setting the appropriate mean and standard deviation values, then observe how the data distributes!</p>
        </div>
      </div>
      
      <div class="footer">
        <p>© 2025 Normal Distribution Dashboard Simulator</p>
      </div>
    </div>
  </div>

  <script>
    // DOM elements
    const meanSlider = document.getElementById('mean');
    const meanValue = document.getElementById('mean-value');
    const stdDevSlider = document.getElementById('stddev');
    const stdDevValue = document.getElementById('stddev-value');
    const realMeanSlider = document.getElementById('real-mean');
    const realMeanValue = document.getElementById('real-mean-value');
    const realStdDevSlider = document.getElementById('real-stddev');
    const realStdDevValue = document.getElementById('real-stddev-value');
    const sampleSizeSlider = document.getElementById('sample-size');
    const sampleSizeValue = document.getElementById('sample-size-value');
    const binCountSlider = document.getElementById('bin-count');
    const binCountValue = document.getElementById('bin-count-value');
    const autoUpdateSlider = document.getElementById('auto-update');
    const autoUpdateValue = document.getElementById('auto-update-value');
    const generateButton = document.getElementById('generate');
    const dataCounter = document.getElementById('data-counter');
    const dataTotal = document.getElementById('data-total');
    const expectedMean = document.getElementById('expected-mean');
    const expectedStdDev = document.getElementById('expected-stddev');
    const actualMean = document.getElementById('actual-mean');
    const actualStdDev = document.getElementById('actual-stddev');
    const progressBar = document.getElementById('progress-bar');
    
    // Real-world table elements
    const tableCalcMean = document.getElementById('table-calc-mean');
    const tableRealMean = document.getElementById('table-real-mean');
    const tableCalc1sdLow = document.getElementById('table-calc-1sd-low');
    const tableCalc1sdHigh = document.getElementById('table-calc-1sd-high');
    const tableReal1sdLow = document.getElementById('table-real-1sd-low');
    const tableReal1sdHigh = document.getElementById('table-real-1sd-high');
    const tableCalc2sdLow = document.getElementById('table-calc-2sd-low');
    const tableCalc2sdHigh = document.getElementById('table-calc-2sd-high');
    const tableReal2sdLow = document.getElementById('table-real-2sd-low');
    const tableReal2sdHigh = document.getElementById('table-real-2sd-high');
    const tableCalc3sdLow = document.getElementById('table-calc-3sd-low');
    const tableCalc3sdHigh = document.getElementById('table-calc-3sd-high');
    const tableReal3sdLow = document.getElementById('table-real-3sd-low');
    const tableReal3sdHigh = document.getElementById('table-real-3sd-high');
    
    // Explanation elements
    const explanationMean = document.getElementById('explanation-mean');
    const explanationStdDev = document.getElementById('explanation-stddev');
    const explanationRealMean = document.getElementById('explanation-real-mean');
    const explanationRealStdDev = document.getElementById('explanation-real-stddev');
    const exampleMean = document.getElementById('example-mean');
    const example1sdLow = document.getElementById('example-1sd-low');
    const example1sdHigh = document.getElementById('example-1sd-high');
    
    // State
    let mean = parseFloat(meanSlider.value);
    let stdDev = parseFloat(stdDevSlider.value);
    let realMean = parseFloat(realMeanSlider.value);
    let realStdDev = parseFloat(realStdDevSlider.value);
    let sampleSize = parseInt(sampleSizeSlider.value);
    let binCount = parseInt(binCountSlider.value);
    let autoUpdateInterval = parseInt(autoUpdateSlider.value);
    let autoUpdateTimer = null;
    let randomData = [];
    let currentDataCount = 0;
    let isGenerating = false; // Flag to track if generation is in progress
    
    // Setup PDF Chart
    const pdfMargin = {top: 20, right: 30, bottom: 40, left: 50};
    const pdfWidth = document.getElementById('pdf-chart').clientWidth - pdfMargin.left - pdfMargin.right;
    const pdfHeight = document.getElementById('pdf-chart').clientHeight - pdfMargin.top - pdfMargin.bottom;
    
    const pdfSvg = d3.select("#pdf-chart")
      .append("svg")
        .attr("width", "100%")
        .attr("height", "100%")
        .attr("viewBox", `0 0 ${pdfWidth + pdfMargin.left + pdfMargin.right} ${pdfHeight + pdfMargin.top + pdfMargin.bottom}`)
        .attr("preserveAspectRatio", "xMidYMid meet")
      .append("g")
        .attr("transform", `translate(${pdfMargin.left},${pdfMargin.top})`);
    
    // Add X axis
    const pdfX = d3.scaleLinear()
      .domain([-4, 4])
      .range([0, pdfWidth]);
    
    const pdfXAxis = pdfSvg.append("g")
      .attr("transform", `translate(0,${pdfHeight})`)
      .attr("class", "axis")
      .call(d3.axisBottom(pdfX));
    
    // Add Y axis
    const pdfY = d3.scaleLinear()
      .domain([0, 0.5])
      .range([pdfHeight, 0]);
    
    const pdfYAxis = pdfSvg.append("g")
      .attr("class", "axis")
      .call(d3.axisLeft(pdfY));
    
    // Add X axis label
    pdfSvg.append("text")
      .attr("class", "axis-label")
      .attr("text-anchor", "middle")
      .attr("x", pdfWidth / 2)
      .attr("y", pdfHeight + pdfMargin.bottom - 5)
      .text("Value");
    
    // Add Y axis label
    pdfSvg.append("text")
      .attr("class", "axis-label")
      .attr("text-anchor", "middle")
      .attr("transform", "rotate(-90)")
      .attr("x", -pdfHeight / 2)
      .attr("y", -pdfMargin.left + 15)
      .text("Probability Density");
    
    // Add path for theoretical curve
    const pdfLine = pdfSvg.append("path")
      .attr("class", "line theoretical")
      .attr("fill", "none");
    
    // Setup Histogram Chart
    const histMargin = {top: 20, right: 30, bottom: 40, left: 50};
    const histWidth = document.getElementById('histogram-chart').clientWidth - histMargin.left - histMargin.right;
    const histHeight = document.getElementById('histogram-chart').clientHeight - histMargin.top - histMargin.bottom;
    
    const histSvg = d3.select("#histogram-chart")
      .append("svg")
        .attr("width", "100%")
        .attr("height", "100%")
        .attr("viewBox", `0 0 ${histWidth + histMargin.left + histMargin.right} ${histHeight + histMargin.top + histMargin.bottom}`)
        .attr("preserveAspectRatio", "xMidYMid meet")
      .append("g")
        .attr("transform", `translate(${histMargin.left},${histMargin.top})`);
    
    // Add X axis
    const histX = d3.scaleLinear()
      .domain([-4, 4])
      .range([0, histWidth]);
    
    const histXAxis = histSvg.append("g")
      .attr("transform", `translate(0,${histHeight})`)
      .attr("class", "axis")
      .call(d3.axisBottom(histX));
    
    // Add Y axis
    const histY = d3.scaleLinear()
      .range([histHeight, 0]);
    
    const histYAxis = histSvg.append("g")
      .attr("class", "axis");
    
    // Add X axis label
    histSvg.append("text")
      .attr("class", "axis-label")
      .attr("text-anchor", "middle")
      .attr("x", histWidth / 2)
      .attr("y", histHeight + histMargin.bottom - 5)
      .text("Value");
    
    // Add Y axis label
    histSvg.append("text")
      .attr("class", "axis-label")
      .attr("text-anchor", "middle")
      .attr("transform", "rotate(-90)")
      .attr("x", -histHeight / 2)
      .attr("y", -histMargin.left + 15)
      .text("Frequency");
      
    // Add mean reference line to histogram
    const histMeanLine = histSvg.append("line")
      .attr("class", "actual-mean-line")
      .attr("stroke", "red")
      .attr("stroke-width", 2)
      .attr("stroke-dasharray", "5,5")
      .attr("y1", 0)
      .attr("y2", histHeight)
      .attr("x1", histX(0))
      .attr("x2", histX(0))
      .style("opacity", 0);
    
    // Add actual stddev lines to histogram
    const histStdDevPlusLine = histSvg.append("line")
      .attr("class", "actual-stddev-line")
      .attr("stroke", "purple")
      .attr("stroke-width", 1.5)
      .attr("stroke-dasharray", "3,3")
      .attr("y1", 0)
      .attr("y2", histHeight)
      .attr("x1", histX(stdDev))
      .attr("x2", histX(stdDev))
      .style("opacity", 0);
    
    const histStdDevMinusLine = histSvg.append("line")
      .attr("class", "actual-stddev-line")
      .attr("stroke", "purple")
      .attr("stroke-width", 1.5)
      .attr("stroke-dasharray", "3,3")
      .attr("y1", 0)
      .attr("y2", histHeight)
      .attr("x1", histX(-stdDev))
      .attr("x2", histX(-stdDev))
      .style("opacity", 0);
      
    // Add mean and stddev lines to PDF chart
    const meanLine = pdfSvg.append("line")
      .attr("class", "mean-line")
      .attr("stroke", "red")
      .attr("stroke-width", 2)
      .attr("stroke-dasharray", "5,5")
      .attr("y1", 0)
      .attr("y2", pdfHeight)
      .attr("x1", pdfX(0))
      .attr("x2", pdfX(0));
    
    // Add +1 StdDev line
    const stdDevPlusLine = pdfSvg.append("line")
      .attr("class", "stddev-line")
      .attr("stroke", "blue")
      .attr("stroke-width", 1.5)
      .attr("stroke-dasharray", "3,3")
      .attr("y1", 0)
      .attr("y2", pdfHeight)
      .attr("x1", pdfX(stdDev))
      .attr("x2", pdfX(stdDev));
    
    // Add -1 StdDev line
    const stdDevMinusLine = pdfSvg.append("line")
      .attr("class", "stddev-line")
      .attr("stroke", "blue")
      .attr("stroke-width", 1.5)
      .attr("stroke-dasharray", "3,3")
      .attr("y1", 0)
      .attr("y2", pdfHeight)
      .attr("x1", pdfX(-stdDev))
      .attr("x2", pdfX(-stdDev));
    
    // Update event listeners
    meanSlider.addEventListener('input', function() {
      mean = parseFloat(this.value);
      meanValue.textContent = mean.toFixed(1);
      expectedMean.textContent = mean.toFixed(1);
      updateRealWorldValues();
      updatePDFChart();
    });
    
    stdDevSlider.addEventListener('input', function() {
      stdDev = parseFloat(this.value);
      stdDevValue.textContent = stdDev.toFixed(1);
      expectedStdDev.textContent = stdDev.toFixed(1);
      updateRealWorldValues();
      updatePDFChart();
    });
    
    realMeanSlider.addEventListener('input', function() {
      realMean = parseFloat(this.value);
      realMeanValue.textContent = realMean.toFixed(0);
      updateRealWorldValues();
    });
    
    realStdDevSlider.addEventListener('input', function() {
      realStdDev = parseFloat(this.value);
      realStdDevValue.textContent = realStdDev.toFixed(0);
      updateRealWorldValues();
    });
    
    sampleSizeSlider.addEventListener('input', function() {
      sampleSize = parseInt(this.value);
      sampleSizeValue.textContent = sampleSize;
      dataTotal.textContent = sampleSize;
    });
    
    binCountSlider.addEventListener('input', function() {
      binCount = parseInt(this.value);
      binCountValue.textContent = binCount;
      updateHistogramChart();
    });
    
    autoUpdateSlider.addEventListener('input', function() {
      autoUpdateInterval = parseInt(this.value);
      
      // Update display text
      if (autoUpdateInterval === 0) {
        autoUpdateValue.textContent = "Fast";
      } else {
        autoUpdateValue.textContent = autoUpdateInterval + "ms";
      }
    });
    
    generateButton.addEventListener('click', function() {
      generateRandomData();
    });
    
    // Update Real-World Values
    function updateRealWorldValues() {
      // Update the table values for calculator mean and standard deviation
      tableCalcMean.textContent = mean.toFixed(1);
      tableCalc1sdLow.textContent = (mean - stdDev).toFixed(1);
      tableCalc1sdHigh.textContent = (mean + stdDev).toFixed(1);
      tableCalc2sdLow.textContent = (mean - 2 * stdDev).toFixed(1);
      tableCalc2sdHigh.textContent = (mean + 2 * stdDev).toFixed(1);
      tableCalc3sdLow.textContent = (mean - 3 * stdDev).toFixed(1);
      tableCalc3sdHigh.textContent = (mean + 3 * stdDev).toFixed(1);
      
      // Update the table values for real-world mean and standard deviation
      tableRealMean.textContent = realMean.toFixed(0);
      tableReal1sdLow.textContent = (realMean - realStdDev).toFixed(0);
      tableReal1sdHigh.textContent = (realMean + realStdDev).toFixed(0);
      tableReal2sdLow.textContent = (realMean - 2 * realStdDev).toFixed(0);
      tableReal2sdHigh.textContent = (realMean + 2 * realStdDev).toFixed(0);
      tableReal3sdLow.textContent = (realMean - 3 * realStdDev).toFixed(0);
      tableReal3sdHigh.textContent = (realMean + 3 * realStdDev).toFixed(0);
      
      // Update the explanation text
      explanationMean.textContent = mean.toFixed(1);
      explanationStdDev.textContent = stdDev.toFixed(1);
      explanationRealMean.textContent = realMean.toFixed(0);
      explanationRealStdDev.textContent = realStdDev.toFixed(0);
      
      // Update the example text
      exampleMean.textContent = realMean.toFixed(0);
      example1sdLow.textContent = (realMean - realStdDev).toFixed(0);
      example1sdHigh.textContent = (realMean + realStdDev).toFixed(0);
    }
    
    // Helper Functions
    
    // Generate normal distribution curve data
    function generateNormalCurve(mean, stdDev) {
      const curveData = [];
      
      // Generate points for the normal curve
      for (let x = mean - 4 * stdDev; x <= mean + 4 * stdDev; x += stdDev / 10) {
        const y = (1 / (stdDev * Math.sqrt(2 * Math.PI))) * 
                  Math.exp(-0.5 * Math.pow((x - mean) / stdDev, 2));
        
        curveData.push({
          x: x,
          y: y
        });
      }
      
      return curveData;
    }
    
    // Box-Muller transform to generate normally distributed random numbers
    function normalRandom(mean, stdDev) {
      const u1 = Math.random();
      const u2 = Math.random();
      
      const z = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
      return mean + stdDev * z;
    }
    
    // Generate random data
    function generateRandomData() {
      // If already generating, don't start again
      if (isGenerating) return;
      
      // Set generating flag
      isGenerating = true;
      
      // Reset data and counter
      randomData = [];
      currentDataCount = 0;
      dataCounter.textContent = '0';
      progressBar.style.width = '0%';
      
      // Reset the statistics display
      actualMean.textContent = "-";
      actualStdDev.textContent = "-";
      
      // Calculate how fast to add points based on interval setting
      // If auto-update is 0 (off), use a reasonably fast default
      const baseSpeed = autoUpdateInterval > 0 ? autoUpdateInterval : 5;
      const pointsPerUpdate = Math.max(1, Math.min(10, Math.floor(sampleSize / 50)));
      const addPointInterval = Math.max(1, Math.floor(baseSpeed / pointsPerUpdate));
      
      const addDataInterval = setInterval(function() {
        if (currentDataCount < sampleSize) {
          // Add a batch of new data points
          for (let i = 0; i < pointsPerUpdate && currentDataCount < sampleSize; i++) {
            randomData.push(normalRandom(mean, stdDev));
            currentDataCount++;
          }
          
          // Update counter and progress bar
          dataCounter.textContent = currentDataCount;
          const progressPercent = (currentDataCount / sampleSize) * 100;
          progressBar.style.width = progressPercent + '%';
          
          // Update histogram regularly
          updateHistogramChart();
        } else {
          // We've reached the sample size, clear the interval
          clearInterval(addDataInterval);
          isGenerating = false;
        }
      }, addPointInterval);
    }
    
    // Calculate statistics (mean and standard deviation)
    function calculateStats(data) {
      if (data.length === 0) {
        return { mean: "-", stdDev: "-" };
      }
      
      // Calculate mean
      const sum = data.reduce((acc, val) => acc + val, 0);
      const mean = sum / data.length;
      
      // Calculate standard deviation
      const squaredDifferences = data.map(val => Math.pow(val - mean, 2));
      const variance = squaredDifferences.reduce((acc, val) => acc + val, 0) / data.length;
      const stdDev = Math.sqrt(variance);
      
      return {
        mean: mean.toFixed(3),
        stdDev: stdDev.toFixed(3)
      };
    }
    
    // Update statistics display
    function updateStats() {
      const stats = calculateStats(randomData);
      actualMean.textContent = stats.mean;
      actualStdDev.textContent = stats.stdDev;
      
      // Only update the histogram reference lines if we have actual data
      if (stats.mean !== "-") {
        const actualMeanValue = parseFloat(stats.mean);
        const actualStdDevValue = parseFloat(stats.stdDev);
        
        // Update mean line
        histMeanLine
          .style("opacity", 1)
          .transition()
          .duration(300)
          .attr("x1", histX(actualMeanValue))
          .attr("x2", histX(actualMeanValue));
        
        // Update stddev lines
        histStdDevPlusLine
          .style("opacity", 1)
          .transition()
          .duration(300)
          .attr("x1", histX(actualMeanValue + actualStdDevValue))
          .attr("x2", histX(actualMeanValue + actualStdDevValue));
        
        histStdDevMinusLine
          .style("opacity", 1)
          .transition()
          .duration(300)
          .attr("x1", histX(actualMeanValue - actualStdDevValue))
          .attr("x2", histX(actualMeanValue - actualStdDevValue));
      } else {
        // Hide lines if no data
        histMeanLine.style("opacity", 0);
        histStdDevPlusLine.style("opacity", 0);
        histStdDevMinusLine.style("opacity", 0);
      }
    }
    
    // Update PDF Chart
    function updatePDFChart() {
      const curveData = generateNormalCurve(mean, stdDev);
      
      // Update Y axis domain based on max value
      const maxY = d3.max(curveData, d => d.y) * 1.1;
      pdfY.domain([0, maxY]);
      pdfYAxis.transition().duration(300).call(d3.axisLeft(pdfY));
      
      // Update line
      const pdfLineGenerator = d3.line()
        .x(d => pdfX(d.x))
        .y(d => pdfY(d.y))
        .curve(d3.curveBasis);
      
      pdfLine.datum(curveData)
        .transition()
        .duration(300)
        .attr("d", pdfLineGenerator);
      
      // Update mean line
      meanLine
        .transition()
        .duration(300)
        .attr("x1", pdfX(mean))
        .attr("x2", pdfX(mean));
      
      // Update stddev lines
      stdDevPlusLine
        .transition()
        .duration(300)
        .attr("x1", pdfX(mean + stdDev))
        .attr("x2", pdfX(mean + stdDev));
      
      stdDevMinusLine
        .transition()
        .duration(300)
        .attr("x1", pdfX(mean - stdDev))
        .attr("x2", pdfX(mean - stdDev));
    }
    
    // Update Histogram Chart
    function updateHistogramChart() {
      // Create histogram with dynamic bin count
      const bins = d3.histogram()
        .domain(histX.domain())
        .thresholds(histX.ticks(binCount))
        (randomData);
      
      // Update Y axis
      const maxY = d3.max(bins, d => d.length);
      histY.domain([0, maxY || 1]); // Ensure non-zero domain even with empty bins
      histYAxis.transition().duration(300).call(d3.axisLeft(histY));
      
      // Remove existing bars
      histSvg.selectAll(".bar").remove();
      
      // Add new bars
      histSvg.selectAll(".bar")
        .data(bins)
        .enter()
        .append("rect")
          .attr("class", "bar")
          .attr("x", d => histX(d.x0) + 1)
          .attr("width", d => Math.max(0, histX(d.x1) - histX(d.x0) - 1))
          .attr("y", d => histY(d.length))
          .attr("height", d => histHeight - histY(d.length));
      
      // Update statistics
      updateStats();
    }
    
    // Window resize handler
    function handleResize() {
      // Redraw charts when window size changes
      window.addEventListener('resize', function() {
        // We could implement a more sophisticated resize handler here
        // For now, let's just update our charts
        updatePDFChart();
        updateHistogramChart();
      });
    }
    
    // Initialize
    expectedMean.textContent = mean.toFixed(1);
    expectedStdDev.textContent = stdDev.toFixed(1);
    actualMean.textContent = "-";
    actualStdDev.textContent = "-";
    updateRealWorldValues();
    updatePDFChart();
    dataTotal.textContent = sampleSize;
    handleResize();
    // Don't automatically generate data at startup
  </script>
</body>
</html>